import{h as v,y as _}from"./hooks.module.CXK6tdif.js";import{l as m}from"./preact.module.2HWAOvZb.js";let u=[],f=0;const c=4;let g=n=>{let e=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},lc:0,listen(l){return t.lc=e.push(l),()=>{for(let o=f+c;o<u.length;)u[o]===l?u.splice(o,c):o+=c;let i=e.indexOf(l);~i&&(e.splice(i,1),--t.lc||t.off())}},notify(l,i){let o=!u.length;for(let r of e)u.push(r,t.value,l,i);if(o){for(f=0;f<u.length;f+=c)u[f](u[f+1],u[f+2],u[f+3]);u.length=0}},off(){},set(l){let i=t.value;i!==l&&(t.value=l,t.notify(i))},subscribe(l){let i=t.listen(l);return l(t.value),i},value:n};return t};function h(n,e,t){let l=new Set([...e,void 0]);return n.listen((i,o,r)=>{l.has(r)&&t(i,o,r)})}let p=(n={})=>{let e=g(n);return e.setKey=function(t,l){let i=e.value;typeof l>"u"&&t in e.value?(e.value={...e.value},delete e.value[t],e.notify(i,t)):e.value[t]!==l&&(e.value={...e.value,[t]:l},e.notify(i,t))},e};function x(n,e={}){let[,t]=v({}),[l]=v(n.get());return _(()=>{l!==n.get()&&t({})},[]),_(()=>{let i,o,r,s=()=>{i||(i=1,o=setTimeout(()=>{i=void 0,t({})}))};return e.keys?r=h(n,e.keys,s):r=n.listen(s),()=>{r(),clearTimeout(o)}},[n,""+e.keys]),n.get()}const y={from:[],subject:"",date:"",html:"",text:"",headers:{"dkim-signature":"",received:void 0,"content-type":"",date:"",from:"","mime-version":"","message-id":"",subject:"",to:""},messageId:"",priority:"",to:[],receivedAt:""},E=p(y),b=p([]),I=n=>{E.set(n)},T=async n=>{const e=await fetch(`/email?email=${n}`).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()});b.set(e)};var S=0;function $(n,e,t,l,i,o){e||(e={});var r,s,a=e;if("ref"in a)for(s in a={},e)s=="ref"?r=e[s]:a[s]=e[s];var d={type:n,props:a,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--S,__i:-1,__u:0,__source:i,__self:o};if(typeof n=="function"&&(r=n.defaultProps))for(s in r)a[s]===void 0&&(a[s]=r[s]);return m.vnode&&m.vnode(d),d}export{$ as a,b,E as c,T as g,I as s,x as u};
